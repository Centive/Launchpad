{% extends 'launchpad/body_base.html' %}
{% block title %}Verification - {{ block.super }}{% endblock title %}

{% load static %}
{% load gravatar %}
{% load humanize %}

{% block js-loads %}
    {{ block.super }}
    <script src="{{ sumsub.host }}/idensic/static/idensic.js"></script>
    <script>
        var id = idensic.init(
            '#kyc-container',
            {
                accessToken: "{{ sumsub.token }}",
                lang: "en",
                applicantDataPage: {
                    "enabled": true,
                    "fields": [
                        {
                            "name": "firstName",
                            "required": true
                        },
                        {
                            "name": "lastName",
                            "required": true
                        },
                        {
                            "name": "phone",
                            "required": true
                        }
                    ]
                },
                requiredDocuments: "IDENTITY:PASSPORT,ID_CARD,DRIVERS;SELFIE:SELFIE;PROOF_OF_RESIDENCE:UTILITY_BILL",
                excludedCountries: [
                    "USA",
                    "UMI",
                    "ASM",
                    "GUM",
                    "MNP",
                    "PRI",
                    "VIR",
                    "PRK",
                    "ETH",
                    "IRN",
                    "IRQ",
                    "SYR",
                    "TUN",
                    "AFG",
                    "YEM",
                    "CYM"
                ],
                helpUrl: "https://centive.org",
                uiConf: {
                    "customLogoUrl": "https://centive.org/wp-content/uploads/2018/06/logo-centive-black.png"
                }
            },
            // function for the iframe callbacks
            function (messageType, payload) {
                console.log('[IDENSIC DEMO] Idensic message:', messageType, payload);
            }
        );
    </script>
{% endblock js-loads %}

{% block body-content %}
    <div class="user-page d-flex">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-2">
                            <img src="{% static 'launchpad/img/brand/logo-centive-color.png' %}" border="0">
                        </div>
                        <div class="col-md-10 text-right">
                            <div class="d-inline-block mr-1">
                                <div class="font-weight-bold">{{ user.email }}</div>
                                <div class="font-weight-bold"><a href="{% url 'accounts:logout' %}">Logout</a></div>
                            </div>
                            <div class="d-inline">
                                <img src="{% gravatar_url user.email 55 %}">
                            </div>
                        </div>
                    </div>
                    <div class="user-pro-box mt-2 shadow-sm border">
                        <div class="topnav" id="top-nav">
                            <a href="{% url 'launchpad:home' %}">Home</a>
                            <a href="{% url 'launchpad:orders' %}">Orders</a>
                            <a href="{% url 'launchpad:transactions' %}">Transactions</a>
                            <a href="{% url 'launchpad:verification' %}" class="active">Verification</a>
                            <a href="javascript:void(0);" class="icon" onclick="dynamicTopNav()">
                                <i class="fa fa-bars"></i>
                            </a>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="p-5">
                                    <div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div id="kyc-container"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock body-content %}